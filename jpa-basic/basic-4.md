
## 연관관계 핵심
1. 방향성 : 관계에는 방향이 있다.
    - 단방향
    - 양방향
2. 다중성 : 관계에는 1:N, N:M 같은 엔티티 간에 다중성을 표현이 가능하다.
    - 다대일(N:1)
    - 일대다(1:N)
    - 일대일(1:1)
    - 다대다(N:M)
3. 연관관계 주인 : 양방향 연관 관계일 경우 관계의 주인을 정해줘라.

<br>
<br>

## 연관관계 매핑
- 단방향 연관관계   
객체의 연관관계와 테이블의 연관관계는 차이점이 있다. 

![관계-1](https://user-images.githubusercontent.com/50852963/110089057-fca4d180-7dd8-11eb-81db-d14e5d157aad.PNG)

그림을 보면 객체인 경우는 Team은 Company 객체를 참조하고 있지만 Company는 Team을 알수가 없다.   
따라서 이와 같은 엔티티 관계를 단방향이라고 하며 Team을 기준으로 다대일(N:1)관계다.  
그러나 테이블은 외래키만 있으면 join을 사용해서 어떤 테이블을 기준으로 잡더라도 데이터 조회가 가능하기 때문에    
양방향 관계라고 할 수 있다.
 

- 양방향 연관관계   
객체로 양방향 관계를 풀어내면 다음 그림과 같다.

![관계2](https://user-images.githubusercontent.com/50852963/110089076-04647600-7dd9-11eb-98e8-c1c8399760da.PNG)


Company 기준에서는 일대다(1:N)관계이므로 List<Team> teams 컬렉션 객체를 통해 일대다 관계를 표현하여 참조가    
가능하다. Team 에서는 Company 객체를 통해 참조가 가능하며 이렇게 서로를 참조하고있기 때문에 양방향 관계     
라고 할 수 있으며, 양방향 관계는 사실 단방향 관계 2개가 서로 교차하여 관계를 매핑한 것이다.     
추가적으로 양방향 관계는 주의할 점이 있는데 연관관계의 주인을 정해야 한다.

<br>
<br>

### 객체 그래프 탐색
객체는 참조를 사용해서 연관관계를 탐색하게되는데 이를 객체 그래프 탐색이라고 칭한다.

<br>
<br>

## 연관관계 주인
연관관계 주인이란 양방향으로 매핑된 두 엔티티 사시 연관관계 중에서 외래키를 관리하는 쪽을 선택하는 것이다.    
연관관계의 주인만이 DB와 매핑되어 외래키를 관리(등록,수정,삭제)할 수 있다. 반대로 주인이 아닌 쪽은 읽기만     
가능하다. 양방향 매핑 관계일 때의 장점은 서로 객체를 참조하고 있기 때문에 단방향과는 다르게 어느 쪽에서든    
객체 그래프 탐색이 가능하다.

<br>

### 연관관계 주인 정하는 기준
처음에는 연관관계 주인을 어디쪽으로 정해야할지 혼동된다. 비즈니스 로직의 중요성이 더 큰 엔티티쪽으로 정하게    
되면 안된다. 비즈니스는 새로운 요구사항에 변동될 가능성도 있기 때문이다. 또한 성능 및 관리적인 측면에서도     
문제가 될 가능성도 있다. 따라서 연관관계의 주인을 정하는 기준은 외래키를 관리하고 있는 테이블을 기준으로     
해당 테이블과 매핑된 엔티티의 필드로 삼을 것을 권장한다.

<br>
<br>

## 다중성 관련 애노테이션 종류
- @ManyToOne (다대일)
- @OneToMany (일대다)
- @OneToOne (일대일)
- @ManyToMany (다대다)


